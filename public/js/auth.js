import{initializeApp as t}from"https://www.gstatic.com/firebasejs/10.12.5/firebase-app.js";import{getAuth as e,onAuthStateChanged as n,GoogleAuthProvider as i,signInWithPopup as o,signOut as a}from"https://www.gstatic.com/firebasejs/10.12.5/firebase-auth.js";let logimg=document.getElementById("login-img"),loginButton=document.getElementById("login-button"),rankingButton=document.getElementById("ranking-button"),pokedexButton=document.getElementById("pokedex-button"),profileButton=document.getElementById("profile-button"),provider=new i,config=await axios.get("/env/fb");export const auth=e(t(config.data));let unsubscribe=n(auth,t=>{t?(loginButton.style.backgroundColor="#ff6666",logimg.src="/public/images/misc/logout.webp",rankingButton.style.borderRadius="0",animateFadeIn(loginButton,"1s"),animateFadeIn(rankingButton,"1s"),animateFadeIn(pokedexButton,"1s"),animateFadeIn(profileButton,"1s")):(loginButton.style.backgroundColor="#8cff66",logimg.src="/public/images/misc/login.webp",rankingButton.style.borderRadius="1.5em 0 0 1.5em",animateFadeIn(loginButton,"1s"),animateFadeIn(rankingButton,"1s"),animateFadeOut(pokedexButton,"1s"),animateFadeOut(profileButton,"1s"))});loginButton.addEventListener("click",()=>{unsubscribe(),auth.currentUser?a(auth).then(()=>{window.location.reload()}):o(auth,provider).then(()=>{auth.currentUser.getIdToken().then(t=>{axios.put("/user/"+auth.currentUser.uid,{name:auth.currentUser.displayName,token:t}),window.location.reload()})})}),profileButton.addEventListener("click",()=>{window.location.href=`/user/${auth.currentUser.uid}/profile`}),pokedexButton.addEventListener("click",()=>{window.location.href=`/user/${auth.currentUser.uid}/pokedex`}),rankingButton.addEventListener("click",()=>{window.location.href="/classic/ranking"});export function animateFadeIn(t,e){t.style.animation="fadeIn "+e,t.style.visibility="visible"}function animateFadeOut(t,e){t.style.animation="fadeOut "+e,setTimeout(()=>t.style.visibility="hidden",750)}